{
  "header": {
    "namespaces": { "x": "http://www.netex.org.uk/netex" }
  },
  "observations": [
    {
      "details": "Attribute 'ref' of element 'TypeOfFrameRef' is missing or attribute 'ref' value does not contain 'UK_PI_FARE_PRODUCT' or 'UK_PI_FARE_PRICE'",
      "category": "Mandatory Element",
      "context": "//x:frames/x:FareFrame/x:TypeOfFrameRef",
      "rules": [
        {
          "test": "check_type_of_frame_ref_ref(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'TariffBasis' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:TariffBasis) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'validityConditions' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:validityConditions) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'ValidBetween' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:validityConditions",
      "rules": [
        {
          "test": "count(x:ValidBetween) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FromDate' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:validityConditions/x:ValidBetween",
      "rules": [
        {
          "test": "count(x:FromDate) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'OperatorRef' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:OperatorRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfTariffRef' missing",
      "category": "Mandatory Element",
      "context": "//x:tariffs//x:Tariff",
      "rules": [
        {
          "test": "count(x:TypeOfTariffRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfTariffRef' does not have an acceptable 'ref' value",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:TypeOfTariffRef",
      "rules": [
        {
          "test": "check_type_of_tariff_ref_values(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'fareStructureElements' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:FareFrame/x:tariffs/x:Tariff",
      "rules": [
        {
          "test": "count(x:fareStructureElements) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FareStructureElement' checks failed: Present at least 3 times, check the 'ref' values are in the correct combination for both 'TypeOfFareStructureElementRef' and 'TypeOfAccessRightAssignmentRef' elements.",
      "category": "Mandatory Element",
      "context": "//x:FareFrame/x:tariffs/x:Tariff/x:fareStructureElements",
      "rules": [{ "test": "all_fare_structure_element_checks(.)" }]
    },
    {
      "details": "Mandatory element 'GenericParameterAssignment' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs/x:Tariff/x:fareStructureElements/x:FareStructureElement",
      "rules": [
        {
          "test": "count(x:GenericParameterAssignment) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'ValidityParameterGroupingType' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs/x:Tariff/x:fareStructureElements/x:FareStructureElement",
      "rules": [
        {
          "test": "count(x:ValidityParameterGroupingType) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'validityParameters' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs/x:Tariff/x:fareStructureElements/x:FareStructureElement/x:GenericParameterAssignment",
      "rules": [
        {
          "test": "count(x:validityParameters) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'limitations' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:fareStructureElements/x:FareStructureElement/x:GenericParameterAssignment",
      "rules": [
        {
          "test": "count(x:limitations) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'UserProfile' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:fareStructureElements/x:FareStructureElement/x:GenericParameterAssignment/x:limitations",
      "rules": [
        {
          "test": "count(x:UserProfile) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'Name' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:fareStructureElements/x:FareStructureElement/x:GenericParameterAssignment/x:limitations/x:UserProfile",
      "rules": [
        {
          "test": "count(x:Name) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'UserType' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:fareStructureElements/x:FareStructureElement/x:GenericParameterAssignment/x:limitations/x:UserProfile",
      "rules": [
        {
          "test": "count(x:UserType) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FrequencyOfUse' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:fareStructureElements/x:FareStructureElement/x:GenericParameterAssignment/x:limitations",
      "rules": [
        {
          "test": "count(x:FrequencyOfUse) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FrequencyOfUseType' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:tariffs//x:Tariff/x:fareStructureElements/x:FareStructureElement/x:GenericParameterAssignment/x:limitations/x:FrequencyOfUse",
      "rules": [
        {
          "test": "count(x:FrequencyOfUseType) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'fareProducts' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:CompositeFrame/x:frames/x:FareFrame",
      "rules": [
        {
          "test": "count(x:fareProducts) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'PreassignedFareProduct' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts",
      "rules": [
        {
          "test": "count(x:PreassignedFareProduct) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'Name' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct",
      "rules": [
        {
          "test": "count(x:Name) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfFareProductRef' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct",
      "rules": [
        {
          "test": "count(x:TypeOfFareProductRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'ChargingMomentType' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct",
      "rules": [
        {
          "test": "count(x:ChargingMomentType) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'validableElements' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct",
      "rules": [
        {
          "test": "count(x:validableElements) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'ValidableElement' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct/x:validableElements",
      "rules": [
        {
          "test": "count(x:ValidableElement) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'fareStructureElements' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct/x:validableElements/x:ValidableElement",
      "rules": [
        {
          "test": "count(x:fareStructureElements) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FareStructureElementRef' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct/x:validableElements/x:ValidableElement/x:fareStructureElements",
      "rules": [
        {
          "test": "count(x:FareStructureElementRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'accessRightsInProduct' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct",
      "rules": [
        {
          "test": "count(x:accessRightsInProduct) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'ValidableElementRef' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct/x:accessRightsInProduct",
      "rules": [
        {
          "test": "count(x:ValidableElementRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'ProductType' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareProducts/x:PreassignedFareProduct",
      "rules": [
        {
          "test": "count(x:ProductType) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'salesOfferPackages' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:CompositeFrame/x:frames/x:FareFrame",
      "rules": [
        {
          "test": "count(x:salesOfferPackages) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'SalesOfferPackage' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:FareFrame/x:salesOfferPackages",
      "rules": [
        {
          "test": "count(x:SalesOfferPackage) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'distributionAssignments' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage",
      "rules": [
        {
          "test": "count(x:distributionAssignments) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'DistributionAssignment' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage/x:distributionAssignments",
      "rules": [
        {
          "test": "count(x:DistributionAssignment) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'DistributionChannelType' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage/x:distributionAssignments/x:DistributionAssignment",
      "rules": [
        {
          "test": "count(x:DistributionChannelType) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'PaymentMethods' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage/x:distributionAssignments/x:DistributionAssignment",
      "rules": [
        {
          "test": "count(x:PaymentMethods) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'salesOfferPackageElements' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage",
      "rules": [
        {
          "test": "count(x:salesOfferPackageElements) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'SalesOfferPackageElement' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage/x:salesOfferPackageElements",
      "rules": [
        {
          "test": "count(x:SalesOfferPackageElement) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfTravelDocumentRef' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage/x:salesOfferPackageElements/x:SalesOfferPackageElement",
      "rules": [
        {
          "test": "count(x:TypeOfTravelDocumentRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'PreassignedFareProductRef' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:salesOfferPackages/x:SalesOfferPackage/x:salesOfferPackageElements/x:SalesOfferPackageElement",
      "rules": [
        {
          "test": "count(x:PreassignedFareProductRef) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'fareTables' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:CompositeFrame/x:frames/x:FareFrame",
      "rules": [
        {
          "test": "count(x:fareTables) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FareTable' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareTables",
      "rules": [
        {
          "test": "count(x:FareTable) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'pricesFor' missing",
      "category": "Mandatory Element",
      "reference": "0",
      "number": 131,
      "context": "//x:fareTables/x:FareTable",
      "rules": [
        {
          "test": "count(x:pricesFor) > 0"
        }
      ]
    },
    {
      "details": "Check if ProductType is dayPass or periodPass. If true, timeIntervals element should be present in tarrifs",
      "category": "Notes",
      "context": "//x:frames//x:FareFrame",
      "rules": [{ "test": "is_time_intervals_present_in_tarrifs(.)" }]
    },
    {
      "details": "Mandatory element 'ValidBetween' missing",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame",
      "rules": [
        {
          "test": "count(x:ValidBetween) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'FromDate' missing",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame/x:ValidBetween",
      "rules": [
        {
          "test": "count(x:FromDate) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'TypeOfFrameRef' missing'",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame",
      "rules": [
        {
          "test": "count(x:TypeOfFrameRef) > 0"
        }
      ]
    },
    {
      "details": "Attribute 'ref' of element 'TypeOfFrameRef' is missing or attribute 'ref' value does not contain 'UK_PI_LINE_FARE_OFFER' or 'UK_PI_NETWORK_OFFER'",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame/x:TypeOfFrameRef",
      "rules": [
        {
          "test": "check_value_of_type_of_frame_ref(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'Organisations' missing",
      "category": "Mandatory Element",
      "context": "//x:CompositeFrame/x:frames/x:ResourceFrame",
      "rules": [
        {
          "test": "count(x:organisations) > 0"
        }
      ]
    },
    {
      "details": "Mandatory element 'Operator' missing",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations",
      "rules": [
        {
          "test": "count(x:Operator) > 0"
        }
      ]
    },
    {
      "details": "'Operator' attribute 'id' format should be noc:xxxx",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator",
      "rules": [
        {
          "test": "check_operator_id_format(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'Public Code' missing",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator",
      "rules": [
        {
          "test": "count(x:PublicCode) > 0"
        }
      ]
    },
    {
      "details": "Element 'Public Code' should be 4 characters long",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator/x:PublicCode",
      "rules": [
        {
          "test": "check_public_code_length(.)"
        }
      ]
    },
    {
      "details": "Mandatory element 'Name' missing",
      "category": "Mandatory Element",
      "context": "//x:ResourceFrame/x:organisations/x:Operator",
      "rules": [
        {
          "test": "count(x:Name) > 0"
        }
      ]
    }
  ]
}
